<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DEV NEPONYATEN — Дневник</title>
  <link rel="stylesheet" href="../styles/styles.css">
  <style>
    /* Мягкие анимации и модалка */
    .fade-in-up { opacity: 0; transform: translateY(16px); transition: opacity .6s ease, transform .6s ease; }
    .fade-in-up.in { opacity: 1; transform: translateY(0); }
    .entry-card { transition: transform .25s ease, box-shadow .25s ease; }
    .entry-card:hover { transform: translateY(-4px); box-shadow: 0 10px 30px rgba(0,0,0,.06); }
    .skill-progress[data-level] { width: 0; transition: width 1.2s ease; }
    /* Модалка */
    .modal { position: fixed; inset: 0; background: rgba(0,0,0,.6); display: none; align-items: center; justify-content: center; z-index: 9999; }
    .modal__inner { width: min(94vw, 720px); background: var(--card-bg, #111); color: var(--text, #fff); border-radius: 12px; padding: 1.25rem; position: relative; }
    .modal__title { margin: 0 0 .75rem; }
    .modal__row { display: grid; gap: .5rem; margin-bottom: .75rem; }
    .modal__actions { display: flex; gap: .75rem; justify-content: flex-end; margin-top: .5rem; }
    .modal__close { position:absolute; right:.75rem; top:.5rem; }
    /* Поиск */
    .toolbar { display:flex; gap:.75rem; align-items:center; flex-wrap:wrap; }
    .toolbar input[type="search"] { flex: 1 1 260px; padding:.6rem .8rem; border-radius: 8px; border:1px solid rgba(0,0,0,.1); }
    /* Контент записи */
    .entry-content.collapsed { max-height: 4.5rem; overflow: hidden; mask-image: linear-gradient(#000, rgba(0,0,0,0)); -webkit-mask-image: linear-gradient(#000, transparent); }
    .entry-actions { display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.5rem; }
  </style>
</head>
<body>
  <header class="header">
    <div class="container">
      <div class="nav-container">
        <div class="logo"><span>{ DevPortfolio }</span></div>
        <nav class="nav">
          <ul class="nav-list" id="navList">
            <li><a href="../index.html" class="nav-link">Главная</a></li>
            <li><a href="projects.html" class="nav-link">Проекты</a></li>
            <li><a href="diary.html" class="nav-link active">Дневник</a></li>
            <li><a href="contacts.html" class="nav-link">Контакты</a></li>
            <li><a href="music.html" class="nav-link">Не открывай</a></li>
          </ul>
        </nav>
        <button class="mobile-menu-btn" id="mobileMenuBtn">☰</button>
      </div>
    </div>
  </header>

  <main class="main-content">
    <div class="container">
      <h1 class="section-title fade-in-up">Учебный Дневник</h1>

      <!-- Верхняя панель: поиск + кнопка -->
      <div class="toolbar fade-in-up" style="margin-top:1rem;">
        <input type="search" id="searchInput" placeholder="Поиск по заголовку/тексту/тегам…" />
        <button class="btn" id="addEntryBtn">+ Добавить запись</button>
        <button class="btn btn-outline" id="exportBtn" title="Экспорт в JSON">Экспорт</button>
      </div>

      <div style="display:grid; grid-template-columns: 1fr 1fr; gap:2rem; margin-top:2rem;">
        <!-- Прогресс обучения -->
        <div>
          <h2 style="margin-bottom:1rem;" class="fade-in-up">Прогресс обучения</h2>
          <div class="skill-category fade-in-up">
            <div class="skill-item">
              <div class="skill-header"><span>Frontend Разработка</span><span>60%</span></div>
              <div class="skill-bar"><div class="skill-progress" data-level="60"></div></div>
            </div>
            <div class="skill-item">
              <div class="skill-header"><span>JavaScript Advanced</span><span>40%</span></div>
              <div class="skill-bar"><div class="skill-progress" data-level="40"></div></div>
            </div>
            <div class="skill-item">
              <div class="skill-header"><span>React & Ecosystem</span><span>10%</span></div>
              <div class="skill-bar"><div class="skill-progress" data-level="10"></div></div>
            </div>
          </div>
        </div>

        <!-- Последние записи -->
        <div>
          <h2 style="margin-bottom:1rem;" class="fade-in-up">Последние записи</h2>
          <div id="entriesList" class="fade-in-up">
            <!-- Список записей рендерится JS -->
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <p>&copy; 2025 Чекунов Кирилл.</p>
      <a href="../index.html" style="color: inherit;">← На главную</a>
    </div>
  </footer>

  <!-- Модалка добавления/редактирования -->
  <div class="modal" id="entryModal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal__inner">
      <button class="btn btn-outline modal__close" id="closeModalBtn">✕</button>
      <h3 class="modal__title" id="modalTitle">Новая запись</h3>
      <form id="entryForm">
        <div class="modal__row">
          <label for="entryTitle">Заголовок *</label>
          <input id="entryTitle" type="text" required placeholder="Например: Разобрался с useEffect">
        </div>
        <div class="modal__row">
          <label for="entryDate">Дата *</label>
          <input id="entryDate" type="date" required value="2025-10-14">
        </div>
        <div class="modal__row">
          <label for="entryTags">Теги (через запятую)</label>
          <input id="entryTags" type="text" placeholder="react, hooks, оптимизация">
        </div>
        <div class="modal__row">
          <label for="entryText">Текст *</label>
          <textarea id="entryText" rows="6" required placeholder="Короткое описание, выводы, ссылки…"></textarea>
        </div>
        <div class="modal__actions">
          <button type="button" class="btn btn-outline" id="cancelBtn">Отмена</button>
          <button type="submit" class="btn" id="saveBtn">Сохранить</button>
        </div>
      </form>
    </div>
  </div>

  <script src="../scripts/core.js"></script>
  <script src="../scripts/diary.js"></script>
  <script src="scripts/enhancements.js"></script>
  <script src="scripts/chatbot.js"></script>
</body>
</html>
