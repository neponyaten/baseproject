<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DEV NEPONYATEN — Контакты</title>
  <link rel="stylesheet" href="../styles/styles.css">
  <style>
    .map-panel { max-height: 0; overflow: hidden; transition: max-height 0.5s ease; }
    .map-panel.open { max-height: 700px; }
    .map-frame {
      width: 100%; max-width: 800px; height: 400px; border: 0; display: block; margin: 0 auto;
    }
    .map-actions { display: flex; gap: .75rem; justify-content: center; flex-wrap: wrap; margin: .75rem 0 1rem; }
    .map-modal {
      position: fixed; inset: 0; background: rgba(0,0,0,.75);
      display: none; align-items: center; justify-content: center; z-index: 9999;
    }
    .map-modal__inner {
      position: relative; width: min(96vw, 1200px); height: min(86vh, 780px);
      background: #000; border-radius: 12px; overflow: hidden;
    }
    .map-modal__close { position: absolute; top: 10px; right: 10px; z-index: 2; }
  </style>
</head>
<body>
  <header class="header">
    <div class="container">
      <div class="nav-container">
        <div class="logo"><span>{ DevPortfolio }</span></div>
        <nav class="nav">
          <ul class="nav-list" id="navList">
            <li><a href="../index.html" class="nav-link">Главная</a></li>
            <li><a href="projects.html" class="nav-link">Проекты</a></li>
            <li><a href="diary.html" class="nav-link">Дневник</a></li>
            <li><a href="contacts.html" class="nav-link active">Контакты</a></li>
            <li><a href="music.html" class="nav-link">Не открывай</a></li>
          </ul>
        </nav>
        <button class="mobile-menu-btn" id="mobileMenuBtn">☰</button>
      </div>
    </div>
  </header>

  <main class="main-content">
    <div class="container">
      <h1 class="section-title">Свяжитесь со мной</h1>

      <div style="display:grid; grid-template-columns: 1fr 1fr; gap:3rem; margin-top:2rem;">
        <!-- Левая колонка: форма -->
        <div>
          <h2 style="margin-bottom:1rem;">Отправить сообщение</h2>
          <form id="contactForm" onsubmit="handleContactForm(event)">
            <div class="form-group">
              <label for="name">Имя *</label>
              <input type="text" id="name" required>
            </div>
            <div class="form-group">
              <label for="email">Email *</label>
              <input type="email" id="email" required>
            </div>
            <div class="form-group">
              <label for="subject">Тема</label>
              <input type="text" id="subject">
            </div>
            <div class="form-group">
              <label for="message">Сообщение *</label>
              <textarea id="message" rows="5" required></textarea>
            </div>
            <div class="form-actions">
              <button type="submit" class="btn">Отправить сообщение</button>
              <button type="reset" class="btn btn-outline">Очистить</button>
            </div>
          </form>
        </div>

        <!-- Правая колонка: контакты + соцсети + карта -->
        <div>
          <h2 style="margin-bottom:1rem;">Контактная информация</h2>
          <div class="project-card">
            <h3>Чекунов Кирилл</h3>
            <p><strong>Email:</strong> chekunov.k.a@edu.mirea.ru</p>
            <p><strong>GitHub:</strong> github.com/neponyaten</p>
            <p><strong>Телеграм:</strong> @neponyaten</p>
            <p><strong>Местоположение:</strong> Москва, Россия</p>
          </div>

          <!-- Социальные сети -->
          <div style="margin-top:2rem;">
            <h3>Социальные сети</h3>
            <div style="display:flex; gap:1rem; margin-top:1rem; flex-wrap:wrap;">
              <button class="btn" onclick="portfolio?.showMessage?.('info','GitHub NEPONYATEN')">GitHub</button>
              <button class="btn btn-outline" onclick="portfolio?.showMessage?.('info','Telegram @neponyaten')">Telegram</button>
            </div>
          </div>

          <!-- Карта (Яндекс) -->
          <section class="map-wrap" id="map-section" style="margin-top:3rem;">
            <h3 style="text-align:center; margin-bottom:.5rem;">Моё местоположение</h3>

            <div class="map-actions">
              <button class="btn" id="toggleMapBtn" aria-expanded="false">Показать карту</button>
              <button class="btn btn-outline" id="copyCoordsBtn" title="Скопировать координаты">Скопировать координаты</button>
              <button class="btn btn-outline" id="openMapModalBtn" title="Развернуть на весь экран">Открыть на весь экран</button>
            </div>

            <div id="mapPanel" class="map-panel" aria-hidden="true">
              <!-- src лениво подставится из animation.js -->
              <iframe
                id="lazyMap"
                class="map-frame"
                loading="lazy"
                allowfullscreen
                referrerpolicy="no-referrer-when-downgrade"
                data-src="https://yandex.ru/map-widget/v1/?ll=37.617300%2C55.755800&z=11&lang=ru_RU&pt=37.617300,55.755800,pm2rdm">
              </iframe>
            </div>
          </section>
        </div>
      </div>
    </div>

    <!-- Модалка карты Яндекс (вне грида) -->
    <div id="mapModal" class="map-modal" aria-hidden="true" role="dialog" aria-modal="true">
      <div class="map-modal__inner">
        <button id="closeMapModalBtn" class="btn btn-outline map-modal__close">Закрыть</button>
        <iframe id="modalMapFrame"
          loading="lazy"
          allowfullscreen
          referrerpolicy="no-referrer-when-downgrade"
          style="position:absolute; inset:0; width:100%; height:100%; border:0;"
          src="">
        </iframe>
      </div>
    </div>
  </main>

  <footer class="footer">
    <div class="container">
      <p>&copy; 2025 Чекунов Кирилл.</p>
      <a href="../index.html" style="color: inherit;">← На главную</a>
    </div>
  </footer>

  <script src="../scripts/core.js"></script>
  <script src="../scripts/animations.js"></script>
  <script src="scripts/enhancements.js"></script>
  <script src="scripts/chatbot.js"></script>
  <script>
    function handleContactForm(event) {
      event.preventDefault();
      if (window.portfolio?.showMessage) {
        portfolio.showMessage('success','Сообщение отправлено! Я свяжусь с вами в ближайшее время.');
      } else {
        alert('Сообщение отправлено!');
      }
      event.target.reset();
    }
  </script>
</body>
</html>
